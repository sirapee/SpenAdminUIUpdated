<!-- 
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#passwordModal">
    Open Password Modal
  </button> -->

  <ngx-spinner
  bdColor="rgba(0,0,0,0.5)"
  size="medium"
  color="#d81616"
  type="ball-clip-rotate"
  [fullScreen]="true"
></ngx-spinner>

<div
  class="modal fade"
  id="passwordModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="passwordModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="passwordModalLabel">Password Reset</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="passwordForm" class="custom-form">
          <div class="form-group">
            <label>User Type</label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="userType" value="user" />
                User
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="userType" value="admin" />
                Admin
              </label>
            </div>
          </div>

          <div *ngIf="passwordForm.get('userType')?.value === 'user'">
            <div class="form-group">
              <label for="username">Username</label>
              <input
                type="text"
                id="username"
                [(ngModel)]="selectedDetails && selectedDetails.username"
                [ngModelOptions]="{ standalone: true }"
                class="form-control"
              />
            </div>
            <div class="form-group">
                <label class="form-label" for="newPasswordInput"
                  >New Password</label
                >
                <input
                  id="newPasswordInput"
                  class="form-control"
                  [style.border-color]="
                    passwordForm.get('newPassword')?.errors &&
                    (passwordForm.get('newPassword')?.touched ||
                      passwordForm.get('newPassword')?.dirty)
                      ? '#D81616'
                      : ''
                  "
                  type="password"
                  formControlName="newPassword"
                />
                <span
                  class="text-danger fs-13"
                  *ngIf="
                    passwordForm.get('newPassword')?.errors &&
                    (passwordForm.get('newPassword')?.touched ||
                      passwordForm.get('newPassword')?.dirty)
                  "
                >
                  <span
                    *ngIf="passwordForm.get('newPassword')?.errors?.['required']"
                    >Password is required</span
                  >
                  <span *ngIf="passwordForm.get('newPassword')?.errors?.['pattern']"
                    >Accept numbers, alphabet (Upper & Lower Case), and symbols
                    only.</span
                  >
                  <span
                    *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']"
                    >Minimum of 8 characters only.</span
                  >
                </span>
              </div>
              <div class="form-group">
                <label class="form-label" for="confirmPasswordInput"
                  >Confirm Password</label
                >
                <input
                  id="confirmPasswordInput"
                  class="form-control"
                  placeholder="Confirm Password"
                  [style.border-color]="
                    passwordForm.get('confirmPassword')?.errors &&
                    (passwordForm.get('confirmPassword')?.touched ||
                      passwordForm.get('confirmPassword')?.dirty)
                      ? '#D81616'
                      : ''
                  "
                  type="password"
                  formControlName="confirmPassword"
                />
                <span
                  class="text-danger fs-13"
                  *ngIf="
                    passwordForm.get('confirmPassword')?.errors &&
                    (passwordForm.get('confirmPassword')?.touched ||
                      passwordForm.get('confirmPassword')?.dirty)
                  "
                >
                  <span
                    *ngIf="passwordForm.get('confirmPassword')?.errors?.['required']"
                    >Confirm Password is required</span
                  >
                  <!-- <span *ngIf="passwordForm.hasError('passwordMismatch')"
                    >Passwords do not match.</span
                  > -->
    
                </span>
              </div>
          </div>

          <div *ngIf="passwordForm.get('userType')?.value === 'admin'">
            <div class="form-group">
              <label for="currentPassword">Current Password</label>
              <input
                type="password"
                id="currentPassword"
                class="form-control"
                formControlName="currentPassword"
              />
            </div>
            <!-- Other admin form controls -->
            <div class="form-group">
                <label class="form-label" for="newPasswordInput"
                  >New Password</label
                >
                <input
                  id="newPasswordInput"
                  class="form-control"
                  [style.border-color]="
                    passwordForm.get('newPasswords')?.errors &&
                    (passwordForm.get('newPasswords')?.touched ||
                      passwordForm.get('newPasswords')?.dirty)
                      ? '#D81616'
                      : ''
                  "
                  type="password"
                  formControlName="newPasswords"
                />
                <span
                  class="text-danger fs-13"
                  *ngIf="
                    passwordForm.get('newPasswords')?.errors &&
                    (passwordForm.get('newPasswords')?.touched ||
                      passwordForm.get('newPasswords')?.dirty)
                  "
                >
                  <span
                    *ngIf="passwordForm.get('newPasswords')?.errors?.['required']"
                    >Password is required</span
                  >
                  <span *ngIf="passwordForm.get('newPasswords')?.errors?.['pattern']"
                    >Accept numbers, alphabet (Upper & Lower Case), and symbols
                    only.</span
                  >
                  <span
                    *ngIf="passwordForm.get('newPasswords')?.errors?.['minlength']"
                    >Minimum of 8 characters only.</span
                  >
                </span>
              </div>
              <div class="form-group">
                <label class="form-label" for="confirmPasswordInput"
                  >Confirm Password</label
                >
                <input
                  id="confirmPasswordInput"
                  class="form-control"
                  placeholder="Confirm Password"
                  [style.border-color]="
                    passwordForm.get('confirmPasswords')?.errors &&
                    (passwordForm.get('confirmPasswords')?.touched ||
                      passwordForm.get('confirmPasswords')?.dirty)
                      ? '#D81616'
                      : ''
                  "
                  type="password"
                  formControlName="confirmPasswords"
                />
                <span
                  class="text-danger fs-13"
                  *ngIf="
                    passwordForm.get('confirmPasswords')?.errors &&
                    (passwordForm.get('confirmPasswords')?.touched ||
                      passwordForm.get('confirmPasswords')?.dirty)
                  "
                >
                  <span
                    *ngIf="passwordForm.get('confirmPasswords')?.errors?.['required']"
                    >Confirm Password is required</span
                  >
                  <span *ngIf="passwordForm.hasError('passwordMismatch')"
                    >Passwords do not match.</span
                  >
    
                </span>
              </div>
          </div>

          <!-- Common form controls -->

      

          <!-- others -->

       
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" (click)="onSubmit()" class="btn btn-primary">
          Reset password
        </button>
        <button
          type="button"
          class="btn btn-light btn-close"
          data-dismiss="modal"
        >
          Close
        </button>
      </div>
    </div>
  </div>
</div>
